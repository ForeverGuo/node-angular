var image = {};
var fs = require('fs');  
var images = require('images');
  
image.add = function(imageData, callback){  
        var flag = imgData.indexOf('png');
        var base64Data = imgData.replace(/^data:image\/\w+;base64,/, "");
        var dataBuffer = new Buffer(base64Data, 'base64');
        if(flag == 1){var text = "expostor"+Math.random()+".png"}else{text = "expostor"+Math.random()+".jpg"}
        fs.writeFile("static/upload/"+text, dataBuffer, function(err) {
             if(err){
                  callback(err);
               };
              //callback(text);
         });

       /* images("static/upload/expostor0.6533581337425858.jpg")
        .size(400)
        .draw(images,10,10)
        .save("static/imageUpload/",{
            quality : 50
        });*/
        return text;   
}
image.del = function(imageSrc,callback){
	    fs.unlink("static/upload/"+imageSrc,function(err){
            if(err){
                return console.error(err);
            }
            console.log("文件删除成功");
        });
	
};
module.exports = image;  
